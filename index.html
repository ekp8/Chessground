<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>chessground</title>
    <link rel="stylesheet" type="text/css" href="chessground/assets/chessground.base.css" />
    <link id="theme-css" rel="stylesheet" type="text/css" href="chessground/assets/chessground.brown.css" />
    <link rel="stylesheet" type="text/css" href="chessground/assets/chessground.cburnett.css" />
    <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 0;
        font-family: sans-serif;
        background: #f5f5f5;
      }
      .controls {
        margin: 20px 0 10px 0;
        display: flex;
        gap: 10px;
      }
      .chessground {
        width: 500px;
        height: 500px;
        margin-bottom: 20px;
      }
      cg-board {
        background-color: #bfcfdd;
      }
    </style>
  </head>
  <body>
    <h2>chessground</h2>
    <div class="controls">
      <button id="flipBtn">Flip Board</button>
      <button id="undoBtn">Undo</button>
      <select id="styleSelect">
        <option value="chessground.base.css">Base</option>
        <option value="chessground.brown.css">Brown</option>
        <option value="chessground.cburnett.css">Cburnett</option>
      </select>
    </div>
    <div class="chessground" id="board"></div>
    <script type="module">
      import { Chessground } from './dist/chessground.js';
      let orientation = 'white';
      let moveHistory = [];
      let cg = Chessground(document.getElementById('board'), {
        orientation,
        movable: {
          free: false,
          color: 'white',
          dests: () => new Map(),
          events: {
            after: (orig, dest) => {
              moveHistory.push({ orig, dest });
            }
          }
        },
        highlight: {
          lastMove: true,
          check: true
        }
      });
      // Flip Board
      document.getElementById('flipBtn').onclick = () => {
        cg.toggleOrientation();
        orientation = orientation === 'white' ? 'black' : 'white';
      };
      // Undo (simple: just flips last move, for demo)
      document.getElementById('undoBtn').onclick = () => {
        if (moveHistory.length > 0) {
          moveHistory.pop();
          // For a real chess app, you would need to keep FENs or use a chess engine
          // Here, just reload the board to the initial position
          cg.set({ fen: 'start' });
        }
      };
      // Style switcher
      document.getElementById('styleSelect').onchange = (e) => {
        const theme = e.target.value;
        document.getElementById('theme-css').href = 'chessground/assets/' + theme;
      };
    </script>
  </body>
</html>
